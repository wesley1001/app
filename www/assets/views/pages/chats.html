<ion-view view-title="Unterhaltungen">
  <ion-content>
    <ion-list>
      <ion-item class="item-remove-animate item-avatar item-icon-right" ng-repeat="chat in chats" type="item-text-wrap" href="#/{{chat.id}}">
        <div class="imgWrap" data-ng-if="chat.type == 'groupChat'">
			<img class="userimg userimg--group" data-ng-repeat="user in chat.users | limitTo: 3" data-ng-src="{{user.userimage}}" alt="{{user.name}}" title="{{partner.name}}">
			<span class="userimg userimg--group userimg--remaining" data-ng-if="chat.users.length > 3">+{{chat.users.length - 3}}</span>
		</div>
		<div class="imgWrap" data-ng-if="chat.type == 'peerChat'">
			<userimage data-ng-repeat="partner in chat.partners" data-user="partner">
		</div>
        <h2><span data-ng-repeat="partner in chat.partners">{{partner.name}}{{$last?"":", "}}</span></h2>
        <p>{{chat.latestMessage.sender.basic.shortname}}: {{chat.latestMessage.text}}</p>
        <i class="icon ion-chevron-right icon-accessory"></i>

        <ion-option-button class="button-energized" ng-click="remove(chat)">
          Archivieren
        </ion-option-button>
      </ion-item>
    </ion-list>
  </ion-content>
</ion-view>
